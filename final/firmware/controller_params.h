/*
 * Deterministic controller parameter export for firmware.
 * profile_mode: robust
 * source_xml: C:/Users/User/Mujoco-series/final/final.xml
 * xml_sha256: 660795e8a55fa4b8d1eefc1ccbea21a9e7670c5ca5a05c686fd2f22945060d20
 * generation_signature_sha256: 1d66d24abd78c7229800c4d2044797550e84da9dfe301241698db45cfb937e88
 * seed_metadata: 12345
 */

#ifndef CONTROLLER_PARAMS_H
#define CONTROLLER_PARAMS_H

#include <stdint.h>

#define CTRL_PROFILE_MODE "robust"
#define CTRL_REAL_HARDWARE_PROFILE 1
#define CTRL_HARDWARE_SAFE 1
#define CTRL_WHEEL_ONLY 1
#define CTRL_ALLOW_BASE_MOTION 0
#define CTRL_XML_SHA256 "660795e8a55fa4b8d1eefc1ccbea21a9e7670c5ca5a05c686fd2f22945060d20"
#define CTRL_GENERATION_SIGNATURE_SHA256 "1d66d24abd78c7229800c4d2044797550e84da9dfe301241698db45cfb937e88"
#define CTRL_NX 9
#define CTRL_NU 3
#define CTRL_NY 5
#define CTRL_DT_SIM 1.000000000e-03f
#define CTRL_CONTROL_STEPS 5
#define CTRL_HZ 2.000000000e+02f
#define CTRL_DELAY_STEPS 1
#define CTRL_HARDWARE_REALISTIC 1

static const float CTRL_A[9][9] = {
    {8.645754056e-01f, -7.057760609e-01f, 9.411527963e-04f, 1.846472268e-11f, 2.852695086e-06f, -5.876291072e-15f, 0.000000000e+00f, 2.266772751e-06f, -1.280607937e-12f},
    {5.505714157e-15f, 1.225022233e+00f, 2.226108465e-11f, 9.330306562e-04f, 1.641020456e-12f, 0.000000000e+00f, -1.058791184e-16f, 1.266208377e-12f, -2.157597450e-06f},
    {-1.354245944e+02f, -7.057760609e+02f, 9.411527963e-01f, 1.846472194e-08f, 2.852695086e-03f, -5.881796786e-12f, 0.000000000e+00f, 2.266772751e-03f, -1.280605396e-09f},
    {5.529431080e-12f, 2.250222329e+02f, 2.226116427e-08f, 9.330306562e-01f, 1.641048408e-09f, 0.000000000e+00f, -1.084202172e-13f, 1.266131297e-09f, -2.157597450e-03f},
    {1.314470395e+02f, 6.850467171e+02f, 5.711880293e-02f, -1.792237691e-08f, 9.678600984e-01f, 5.719166460e-12f, 0.000000000e+00f, -2.200195384e-03f, 1.242983581e-09f},
    {4.351946688e-02f, 2.268051682e-01f, 1.891088503e-05f, -5.933743728e-12f, -9.167298591e-07f, 1.000000000e+00f, 0.000000000e+00f, 9.988526820e-04f, 4.115322809e-13f},
    {1.799945013e-15f, 7.256548022e-02f, 7.178868926e-12f, -2.159636642e-05f, 5.292367734e-13f, 0.000000000e+00f, 1.000000000e+00f, 4.083228201e-13f, 9.988838701e-04f},
    {4.351946688e+01f, 2.268051682e+02f, 1.891088503e-02f, -5.933743622e-09f, -9.167298591e-04f, 1.890577538e-12f, 0.000000000e+00f, 9.988526820e-01f, 4.115326515e-10f},
    {1.788933585e-12f, 7.256548022e+01f, 7.178827845e-09f, -2.159636642e-02f, 5.291990804e-10f, 0.000000000e+00f, 0.000000000e+00f, 4.083105382e-10f, 9.988838701e-01f}
};

static const float CTRL_B[9][3] = {
    {-5.705390171e-06f, -1.888977293e-06f, 1.064455717e-12f},
    {-3.284052616e-12f, -1.056355964e-12f, 1.797997874e-06f},
    {-5.705390171e-03f, -1.888977293e-03f, 1.064456140e-09f},
    {-3.284048380e-09f, -1.056338177e-09f, 1.797997875e-03f},
    {6.427980314e-02f, 1.833496154e-03f, -1.033190460e-09f},
    {1.833459718e-06f, 9.560982983e-07f, -3.420755792e-13f},
    {-1.059055882e-12f, -3.406131239e-13f, 9.301082217e-07f},
    {1.833459718e-03f, 9.560982983e-04f, -3.420725617e-10f},
    {-1.059048682e-09f, -3.406021125e-10f, 9.301082217e-04f}
};

static const float CTRL_C[5][9] = {
    {1.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 1.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 1.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 1.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 1.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f}
};

static const float CTRL_K_DU[3][12] = {
    {6.342288399e+02f, 5.566751334e+03f, -1.598029657e+00f, 3.593472107e+00f, 3.812351773e-01f, -7.713927672e-02f, -6.616836069e-01f, -1.302290295e-01f, -1.048781782e+00f, 2.401704783e-01f, 7.267768520e-03f, 2.165455105e-03f},
    {7.101955301e+02f, 5.001193230e+03f, 5.185011937e+00f, 3.157946270e+00f, -2.490008682e-02f, 1.390279080e+01f, -4.787955185e-01f, 2.154175281e+01f, -7.539413237e-01f, 2.725413195e-02f, 2.962007712e-01f, 1.976978213e-03f},
    {7.844021549e+02f, 1.198270097e+05f, 4.817571869e-01f, 1.822952724e+02f, -6.228270140e-02f, -3.512161246e-01f, -8.761268084e+00f, -5.587730994e-01f, -1.470697078e+01f, 8.120456643e-03f, 1.976978213e-03f, 7.177136248e-01f}
};

static const float CTRL_L[9][5] = {
    {8.406967595e-01f, -1.268732210e-04f, -9.647123410e-04f, -3.567612177e-03f, 1.539471342e-05f},
    {-1.268732210e-04f, 8.400917035e-01f, -8.079867848e-06f, 8.435773586e-04f, 1.171662506e-07f},
    {-2.026856831e-02f, -1.697577055e-04f, 9.871829297e-01f, -4.515965341e-03f, -1.174029183e-02f},
    {-7.495539141e-02f, 1.772352710e-02f, -4.515965341e-03f, 9.848162957e-01f, 6.978132175e-05f},
    {2.545056654e-02f, 1.936994453e-04f, -9.238032786e-01f, 5.490852760e-03f, 4.646289853e-02f},
    {1.905916403e-01f, -1.961019947e-01f, 2.012934402e-02f, 3.838296101e-02f, 1.079456471e-02f},
    {-6.690154250e+00f, 2.573049718e+00f, -4.182560034e-01f, -1.205058336e+00f, -6.990478971e-02f},
    {1.033759498e-02f, 7.396792748e-05f, -3.025835493e-01f, 2.129192975e-03f, 1.865057751e-02f},
    {-4.022623776e-02f, 9.060808450e-03f, -2.252876150e-03f, 3.147936915e-01f, 6.854902719e-05f}
};

static const float CTRL_MAX_U[3] = {3.000000000e-02f, 2.000000000e-01f, 2.000000000e-01f};

static const float CTRL_MAX_DU[3] = {1.200000000e-01f, 2.000000000e-02f, 2.000000000e-02f};

static const float CTRL_QX[9][9] = {
    {1.200000000e+02f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 9.000000000e+01f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 7.000000000e+01f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 5.000000000e+01f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 1.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 2.200000000e+02f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 2.200000000e+02f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 5.200000000e+02f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f, 5.200000000e+02f}
};

static const float CTRL_QU[3][3] = {
    {1.000000000e-03f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 8.000000000e-02f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 8.000000000e-02f}
};

static const float CTRL_R_DU[3][3] = {
    {3.000000000e+00f, 0.000000000e+00f, 0.000000000e+00f},
    {0.000000000e+00f, 8.000000000e-01f, 0.000000000e+00f},
    {0.000000000e+00f, 0.000000000e+00f, 8.000000000e-01f}
};

static const float CTRL_XML_CTRL_LOW[3] = {-2.000000000e+03f, -5.000000000e+02f, -5.000000000e+02f};

static const float CTRL_XML_CTRL_HIGH[3] = {2.000000000e+03f, 5.000000000e+02f, 5.000000000e+02f};


static const float CTRL_KI_BASE = 0.000000000e+00f;
static const float CTRL_U_BLEED = 9.000000000e-01f;
static const float CTRL_X_REF = 0.000000000e+00f;
static const float CTRL_Y_REF = 0.000000000e+00f;
static const float CTRL_INT_CLAMP = 2.000000000e+00f;
static const float CTRL_CRASH_ANGLE_RAD = 1.047197551e-01f;
static const float CTRL_UPRIGHT_ANGLE_THRESH = 5.235987756e-02f;
static const float CTRL_UPRIGHT_VEL_THRESH = 1.000000000e-01f;
static const float CTRL_UPRIGHT_POS_THRESH = 3.000000000e-01f;

static const float CTRL_IMU_ANGLE_NOISE_STD_RAD = 4.363323130e-03f;
static const float CTRL_IMU_RATE_NOISE_STD_RAD_S = 2.000000000e-02f;
static const float CTRL_WHEEL_RATE_NOISE_STD_RAD_S = 1.000000000e-02f;
static const float CTRL_WHEEL_ENCODER_TICKS_PER_REV = 2.048000000e+03f;
static const float CTRL_CONTROL_DT = 5.000000000e-03f;
static const float CTRL_WHEEL_RATE_LSB_RAD_S = 6.135923152e-01f;

static const float CTRL_MAX_WHEEL_SPEED_RAD_S = 4.500000000e+01f;
static const float CTRL_MAX_PITCH_ROLL_RATE_RAD_S = 1.500000000e+00f;
static const float CTRL_MAX_BASE_SPEED_M_S = 2.000000000e-02f;
static const float CTRL_WHEEL_DERATE_START_FRAC = 3.000000000e-01f;
static const float CTRL_BASE_DERATE_START_FRAC = 8.000000000e-02f;
static const float CTRL_BASE_FORCE_SOFT_LIMIT = 1.000000000e-01f;
static const float CTRL_BASE_SPEED_SOFT_LIMIT_FRAC = 3.500000000e-01f;
static const float CTRL_WHEEL_TORQUE_LIMIT_NM = 2.387324146e-01f;
static const uint32_t CTRL_CMD_TIMEOUT_US = 50000u;
static const uint32_t CTRL_TILT_TRIP_COUNT = 12u;

static const float CTRL_WHEEL_MOTOR_KV_RPM_PER_V = 9.000000000e+02f;
static const float CTRL_WHEEL_MOTOR_RESISTANCE_OHM = 2.200000000e-01f;
static const float CTRL_WHEEL_CURRENT_LIMIT_A = 2.500000000e+01f;
static const float CTRL_BUS_VOLTAGE_V = 2.400000000e+01f;
static const float CTRL_WHEEL_GEAR_RATIO = 1.000000000e+00f;
static const float CTRL_DRIVE_EFFICIENCY = 9.000000000e-01f;

#endif /* CONTROLLER_PARAMS_H */
